<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Read LPJmL input and output files — read_io • lpjmlkit</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Read LPJmL input and output files — read_io"><meta property="og:description" content="Generic function to read LPJmL input &amp;amp; output files in different
formats. Depending on the format, arguments can be automatically detected
or have to be passed as individual arguments."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">lpjmlkit</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.7.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/lpjml-data.html">LPJmL Data</a>
    </li>
    <li>
      <a href="../articles/lpjml-runner.html">LPJmL Runner</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/PIK-LPJmL/lpjmlkit/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Read LPJmL input and output files</h1>
    <small class="dont-index">Source: <a href="https://github.com/PIK-LPJmL/lpjmlkit/blob/HEAD/R/read_io.R" class="external-link"><code>R/read_io.R</code></a></small>
    <div class="hidden name"><code>read_io.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Generic function to read LPJmL input &amp; output files in different
formats. Depending on the format, arguments can be automatically detected
or have to be passed as individual arguments.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">read_io</span><span class="op">(</span></span>
<span>  <span class="va">filename</span>,</span>
<span>  subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  band_names <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dim_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cell"</span>, <span class="st">"time"</span>, <span class="st">"band"</span><span class="op">)</span>,</span>
<span>  file_type <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  version <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  order <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  firstyear <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  nyear <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  firstcell <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ncell <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  nbands <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cellsize_lon <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  scalar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cellsize_lat <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  datatype <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  nstep <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  timestep <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  endian <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  variable <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  descr <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  unit <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  silent <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>filename</dt>
<dd><p>Mandatory character string giving the file name to read,
including its path and extension.</p></dd>


<dt>subset</dt>
<dd><p>Optional list allowing to subset data read from the file along
one or several of its dimensions. See details for more information.</p></dd>


<dt>band_names</dt>
<dd><p>Optional vector of character strings providing the band
names or <code>NULL</code>. Normally determined automatically from the meta file in
case of output files using <code>file_type = "meta"</code>.</p></dd>


<dt>dim_order</dt>
<dd><p>Order of dimensions in returned LPJmLData object. Must be
a character vector containing all of the following in any order:
<code>c("cell", "time", "band")</code>. Users may select the order most useful to
their further data processing.</p></dd>


<dt>file_type</dt>
<dd><p>Optional character string giving the file type. This is
normally detected automatically but can be prescribed if automatic
detection is incorrect. Valid options:</p><ul><li><p><code>"raw"</code>, a binary file without header.</p></li>
<li><p><code>"clm"</code>, a binary file with header.</p></li>
<li><p><code>"meta"</code>, a meta information JSON file complementing a raw or clm file.</p></li>
</ul></dd>


<dt>version</dt>
<dd><p>Integer indicating the clm file header version, currently
supports one of <code>c(1, 2, 3, 4)</code>.</p></dd>


<dt>order</dt>
<dd><p>Integer value or character string describing the order of data
items in the file (default in input file: 1; in output file: 4). Valid
values for LPJmL input/output files are <code>"cellyear"</code>/ <code>1</code>, <code>"yearcell"</code> /
<code>2</code>, <code>"cellindex"</code>/ <code>3</code>, and <code>"cellseq"</code> / <code>4</code>, although only options <code>1</code>
and <code>4</code> are supported by this function.</p></dd>


<dt>firstyear</dt>
<dd><p>Integer providing the first year of data in the file.</p></dd>


<dt>nyear</dt>
<dd><p>Integer providing the number of years of data included in the
file. These are not consecutive in case of <code>timestep &gt; 1</code>.</p></dd>


<dt>firstcell</dt>
<dd><p>Integer providing the cell index of the first data item.
<code>0</code> by default.</p></dd>


<dt>ncell</dt>
<dd><p>Integer providing the number of data items per band.</p></dd>


<dt>nbands</dt>
<dd><p>Integer providing the number of bands per time step of data.</p></dd>


<dt>cellsize_lon</dt>
<dd><p>Numeric value providing the longitude cell size in
degrees.</p></dd>


<dt>scalar</dt>
<dd><p>Numeric value providing a conversion factor that needs to be
applied to raw data when reading it from file to derive final values.</p></dd>


<dt>cellsize_lat</dt>
<dd><p>Numeric value providing the latitude cell size in
degrees.</p></dd>


<dt>datatype</dt>
<dd><p>Integer value or character string describing the LPJmL data
type stored in the file. Supported options: <code>"byte"</code> / <code>0</code>, <code>"short"</code> /
<code>1</code>, <code>"int"</code> / <code>2</code>, <code>"float"</code> / <code>3</code>, or <code>"double"</code> / <code>4</code>.</p></dd>


<dt>nstep</dt>
<dd><p>Integer value defining the number of within-year time steps of
the file. Valid values are <code>1</code> (yearly), <code>12</code> (monthly), <code>365</code> (daily).
Defaults to <code>1</code> if not read from file ("clm" or "meta" file) or provided by
the user.</p></dd>


<dt>timestep</dt>
<dd><p>Integer value providing the interval in years between years
represented in the file data. Normally <code>1</code>, but LPJmL also allows averaging
annual outputs over several years. Defaults to <code>1</code> if not read from file
("clm" or "meta" file) or provided by user.</p></dd>


<dt>endian</dt>
<dd><p>Endianness to use for file (either <code>"big"</code> or <code>"little"</code>). By
default uses endianness determined from file header or set in meta
information or the platform-specific endianness <code>.Platform$endian</code> if not
set.</p></dd>


<dt>variable</dt>
<dd><p>Optional character string providing the name of the variable
contained in the file. Included in some JSON meta files. <strong>Important:</strong> If
<code>file_type == "raw"</code>, prescribe <code>variable = "grid"</code> to ensure that data
are recognized as a grid.</p></dd>


<dt>descr</dt>
<dd><p>Optional character string providing a more detailed description
of the variable contained in the file. Included in some JSON meta files.</p></dd>


<dt>unit</dt>
<dd><p>Optional character string providing the unit of the data in the
file. Included in some JSON meta files.</p></dd>


<dt>name</dt>
<dd><p>Optional character string specifying the header name. This is
usually read from clm headers for <code>file_type = "clm"</code> but can be specified
for the other <code>file_type</code> options.</p></dd>


<dt>silent</dt>
<dd><p>If set to <code>TRUE</code>, suppresses most warnings or messages. Use
only after testing that <code>read_io()</code> works as expected with the files it is
being used on. Default: <code>FALSE</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>An <a href="LPJmLData.html">LPJmLData</a> object.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The <code>file_type</code> determines which arguments are mandatory or optional.
<code>filename</code> must always be provided. <code>file_type</code> is usually detected
automatically. Supply only if detected <code>file_type</code> is incorrect.</p>
<p>In case of <code>file_type = "meta"</code>, if any of the function arguments not listed
as "mandatory" are provided and are already set in the JSON file, a warning
is given, but they are still overwritten. Normally, you would only set meta
attributes not set in the JSON file.</p>
<p>In case of <code>file_type = "clm"</code>, function arguments not listed as "optional"
are usually determined automatically from the file header included in the
clm file. Users may still provide any of these arguments to overwrite values
read from the file header, e.g. when they know that the values in the file
header are wrong. Also, clm headers with versions &lt; 4 do not contain all
header attributes, with missing attributes filled with default values that
may not be correct for all files.</p>
<p>In case of <code>file_type = "raw"</code>, files do not contain any information about
their structure. Users should provide all arguments not listed as "optional".
Otherwise, default values valid for LPJmL standard outputs are used for
arguments not supplied by the user. For example, the default <code>firstyear</code> is
1901, the default for <code>nyear</code>, <code>nbands</code>, <code>nstep</code>, and <code>timestep</code> is 1.</p>
<p><code>subset</code> can be a list containing one or several named elements. Allowed
names are "band", "cell", and "year".</p><ul><li><p>"year" can be used to return data for a subset of one or several years
included in the file. Integer indices can be between 1 and <code>nyear</code>. If
subsetting by actual calendar years (starting at <code>firstyear</code>) a
character vector has to be supplied.</p></li>
<li><p>"band" can be used to return data for a subset of one or several bands
included in the file. These can be specified either as integer indices or as
a character vector if bands are named.</p></li>
<li><p>"cell" can be used to return data for a subset of cells. Note that integer
indices start counting at 1, whereas character indices start counting at the
value of <code>firstcell</code> (usually <code>0</code>).</p></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># First case: meta file. Reads meta information from "my_file.json" and</span></span></span>
<span class="r-in"><span><span class="co"># data from binary file linked in "my_file.json". Normally does not require</span></span></span>
<span class="r-in"><span><span class="co"># any additional arguments.</span></span></span>
<span class="r-in"><span><span class="va">my_data</span> <span class="op">&lt;-</span> <span class="fu">read_io</span><span class="op">(</span><span class="st">"my_file.json"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Suppose that file data has two bands named "wheat" and "rice". `band_names`</span></span></span>
<span class="r-in"><span><span class="co"># are included in the JSON meta file. Select only the "wheat" band during</span></span></span>
<span class="r-in"><span><span class="co"># reading and discard the "rice" band. Also, read only data for years</span></span></span>
<span class="r-in"><span><span class="co"># 1910-1920.</span></span></span>
<span class="r-in"><span><span class="va">my_data_wheat</span> <span class="op">&lt;-</span> <span class="fu">read_io</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"my_file.json"</span>,</span></span>
<span class="r-in"><span>  subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>band <span class="op">=</span> <span class="st">"wheat"</span>, year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1910</span>, <span class="fl">1920</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Read data from clm file. This includes a header describing the file</span></span></span>
<span class="r-in"><span><span class="co"># structure.</span></span></span>
<span class="r-in"><span><span class="va">my_data_clm</span> <span class="op">&lt;-</span> <span class="fu">read_io</span><span class="op">(</span><span class="st">"my_file.clm"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Suppose that "my_file.clm" has two bands containing data for "wheat" and</span></span></span>
<span class="r-in"><span><span class="co"># "rice". Assign names to them manually since the header does not include a</span></span></span>
<span class="r-in"><span><span class="co"># `band_names` attribute.</span></span></span>
<span class="r-in"><span><span class="va">my_data_clm</span> <span class="op">&lt;-</span> <span class="fu">read_io</span><span class="op">(</span><span class="st">"my_file.clm"</span>, band_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"wheat"</span>, <span class="st">"rice"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Once `band_names` are set, subsetting by name is possible also for</span></span></span>
<span class="r-in"><span><span class="co"># file_type = "clm"</span></span></span>
<span class="r-in"><span><span class="va">my_data_wheat</span> <span class="op">&lt;-</span> <span class="fu">read_io</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"my_file.clm"</span>,</span></span>
<span class="r-in"><span>  band_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"wheat"</span>, <span class="st">"rice"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>band <span class="op">=</span> <span class="st">"wheat"</span>, year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1910</span>, <span class="fl">1920</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Read data from raw binary file. All information about file structure needs</span></span></span>
<span class="r-in"><span><span class="co"># to be supplied. Use default values except for nyear (1 by default), and</span></span></span>
<span class="r-in"><span><span class="co"># nbands (also 1 by default).</span></span></span>
<span class="r-in"><span><span class="va">my_data</span> <span class="op">&lt;-</span> <span class="fu">read_io</span><span class="op">(</span><span class="st">"my_file.bin"</span>, nyear <span class="op">=</span> <span class="fl">100</span>, nbands <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Supply band_names to be able to subset by name</span></span></span>
<span class="r-in"><span><span class="va">my_data_wheat</span> <span class="op">&lt;-</span> <span class="fu">read_io</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"my_file.bin"</span>,</span></span>
<span class="r-in"><span>  band_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"wheat"</span>, <span class="st">"rice"</span><span class="op">)</span>, <span class="co"># length needs to correspond to `nbands`</span></span></span>
<span class="r-in"><span>  subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>band <span class="op">=</span> <span class="st">"wheat"</span>, year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1910</span>, <span class="fl">1920</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  nyear <span class="op">=</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>  nbands <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jannes Breier, Sebastian Ostberg, Stephen Björn Wirth, Sara Minoli, Fabian Stenzel, Christoph Müller.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

